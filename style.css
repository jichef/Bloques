:root { --ui-bg: #ffffffcc; }
* { box-sizing: border-box; }

html, body { 
  margin:0; 
  height:100%; 
  background:#f9f9f9; 
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif; 
}

/* ===== Canvas / contenedor =====
   Reservamos 34px abajo para que la franja "Detalles" no tape el lienzo */
#container { 
  position:fixed; 
  top:0; left:0; right:0; 
  bottom:34px;            /* <- antes era inset:0; ahora guardamos sitio a la franja */
}

/* ===== Fuente personalizada Escolar ===== */
@font-face {
  font-family: 'Escolar';
  src:
    url('escolar_G.woff2') format('woff2'),
    url('escolar_G.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* ===== Franja superior (estado grande) ===== */
#status {
  font-family: 'Escolar', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 20px;  
  line-height: 1.3;
  padding-top:2px;
}

/* ===== Panel inferior (desplegable: contenido) ===== */
#breakdown {
  font-family: 'Escolar', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 26px;       /* más grande */
  line-height: 1.5;
  display:grid; 
  grid-template-columns:auto 1fr; 
  gap:6px 12px;
}
#breakdown .label { color:#555; }
#breakdown .value { font-weight:600; }

/* ===== Colores de C, D y U (reutilizables) ===== */
.c { color:#2ecc71; font-weight:700; }  /* Centenas (verde)  */
.d { color:#ff3b30; font-weight:700; }  /* Decenas  (rojo)   */
.u { color:#1f78ff; font-weight:700; }  /* Unidades (azul)   */

/* ===== Franja inferior fija ("Detalles") ===== */
#details-strip{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: 34px;
  display: flex; align-items: center; gap: 10px;
  padding: 0 14px;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  font-family: 'Escolar', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 18px;       /* tamaño cómodo para aula */
  line-height: 1.3;
  color: #1f2340;
  z-index: 12;           /* por encima del canvas y debajo del panel */
  cursor: pointer;
  user-select: none;
}
#details-text{ overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1 1 auto; }
#details-caret{ font-size: 12px; color: #636a8a; }

/* ===== Contenedor del panel plegable ===== */
#panel-wrap { position: fixed; left: 0; right: 0; bottom: 0; z-index: 20; }

/* ===== Panel (plegable) =====
   Posicionado encima de la franja; comienza “cerrado” mostrando sólo la franja */
#panel { 
  max-height: 40vh; 
  overflow: auto; 
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  padding: 10px 14px;
  transform: translateY(calc(100% - 34px));  /* deja visible la franja */
  transition: transform .25s ease;
  pointer-events: none;                      /* deshabilita interacciones si está cerrado */
}
#panel.open {
  transform: translateY(0%);                 /* abre el panel por completo */
  pointer-events: auto;
}
#panel h3, #panel h4 { margin:8px 0; }
#panel #panel-toggle { pointer-events: auto; }

/* ===== Botones superiores ===== */
#controls {
  position: fixed;
  top: env(safe-area-inset-top, 8px);
  left: env(safe-area-inset-left, 8px);
  right: env(safe-area-inset-right, 8px);
  padding: 8px; z-index: 10; background: var(--ui-bg);
  backdrop-filter: blur(6px); border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,.12);
}
#controls .row { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:6px; }
#controls button { font-size:16px; padding:10px 14px; border-radius:10px; border:none; background:#3498db; color:#fff; cursor:pointer; }
#controls button:hover { background:#2e86c1; }
#controls button:active { transform: translateY(1px); }

/* iOS: evitar zoom extraño al tocar botones */
button { touch-action: manipulation; }