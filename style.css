/* ==== FIX Firefox: franja inferior y panel ==== */
:root{
  --strip-h: 48px; /* altura visible de la franja Detalles */
}

/* El lienzo deja hueco para la franja */
#container{
  position: fixed;
  top: 0; left: 0; right: 0;
  bottom: var(--strip-h); /* sin env() aquí para desktop */
}

/* Franja inferior siempre totalmente visible y encima de todo */
#details-strip{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: var(--strip-h);
  display: flex; align-items: center; gap: 10px;
  padding: 0 14px;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  font-family: 'Escolar', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 18px; line-height: 1.3; color: #1f2340;
  z-index: 2147483647; /* por si acaso */
  cursor: pointer; user-select: none;
}

/* Contenedor del panel anclado por encima de la franja */
#panel-wrap{
  position: fixed;
  left: 0; right: 0;
  bottom: var(--strip-h) !important; /* clave: deja libre la franja */
  z-index: 2147483600;
}

/* El panel se esconde mostrándose fuera del viewport del wrap */
#panel{
  max-height: 40vh;
  overflow: auto;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  padding: 10px 14px;
  transform: translateY(100%) !important;   /* cerrado: totalmente fuera */
  transition: transform .25s ease;
  pointer-events: none;
}
#panel.open{
  transform: translateY(0%) !important;     /* abierto: entra completo */
  pointer-events: auto;
}

/* (Opcional) si usas área segura en móviles, añade solo en móviles */
@supports (padding: max(0px)) {
  @media (hover:none) and (pointer:coarse){
    #details-strip{
      padding-bottom: env(safe-area-inset-bottom, 0px);
      height: calc(var(--strip-h) + env(safe-area-inset-bottom, 0px));
    }
    #panel-wrap{
      bottom: calc(var(--strip-h) + env(safe-area-inset-bottom, 0px)) !important;
    }
    #container{
      bottom: calc(var(--strip-h) + env(safe-area-inset-bottom, 0px));
    }
  }
}