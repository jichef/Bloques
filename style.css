:root { 
  --ui-bg: #ffffffcc;
  --strip-h: 44px;                  /* altura visible de la franja Detalles */
}

/* El lienzo deja libre el alto de la franja */
#container {
  position: fixed;
  top: 0; left: 0; right: 0;
  bottom: calc(var(--strip-h) + env(safe-area-inset-bottom, 0px));
}

/* Franja inferior SIEMPRE visible y por ENCIMA del panel */
#details-strip{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: calc(var(--strip-h) + env(safe-area-inset-bottom, 0px));
  padding: 0 14px;
  padding-bottom: env(safe-area-inset-bottom, 0px);
  display: flex; align-items: center; gap: 10px;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  font-family: 'Escolar', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 18px; line-height: 1.3; color: #1f2340;
  z-index: 12;                         /* > panel */
  cursor: pointer; user-select: none;
}
#details-text{ overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1 1 auto; }
#details-caret{ font-size: 12px; color: #636a8a; }

/* Contenedor del panel: se coloca JUSTO ENCIMA de la franja */
#panel-wrap {
  position: fixed;
  left: 0; right: 0;
  bottom: var(--strip-h);              /* <- clave: deja hueco de la franja */
  z-index: 11;                         /* por debajo de la franja */
}

/* Panel: cerrado = totalmente fuera, abierto = visible */
#panel {
  max-height: 40vh;
  overflow: auto;
  background: rgba(255,255,255,0.96);
  border-top: 1px solid #e5e5e5;
  padding: 10px 14px;
  transform: translateY(100%);         /* <- cerrado: fuera del viewport */
  transition: transform .25s ease;
  pointer-events: none;
}
#panel.open {
  transform: translateY(0);
  pointer-events: auto;
}
#panel h3, #panel h4 { margin:8px 0; }
#panel #panel-toggle { pointer-events: auto; }